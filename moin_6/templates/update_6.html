{% extends 'base.html' %}

{% block content %}
{% load static %}

<script>
    function numberMaxLength(e){
        if(e.value.length > e.maxLength){
            e.value = e.value.slice(0, e.maxLength);
        }
    }
</script>

<form method="POST" action="{%url 'update_6' open.id %}" enctype="multipart/form-data" >
    {% csrf_token %}
    <div class = "firstbox" style = "margin-top:12vh;margin-bottom:2vh; height:7vh; display: flex; flex-direction: row; justify-content:space-between; align-items: center; ">
        <div id = "arrow" style="margin-left:20px;"><a href="{{ request.META.HTTP_REFERER }}"><img src = "{%static '화살표.png'%}"></a></div>
        <div id = "make_txt" style = "margin-right: 37%;font-weight: bold;font-size: 20px;font-family: 'Nanum Gothic';">모임 수정</div>
    </div>
    <div class = "groupname" style = "display:flex; flex-direction: row;justify-content: space-around;align-items: center;">
        <div id = "groupnametxt" style = "font-size: 20px; font-family : 'Nanum Gothic';font-weight: bold;"> 모임명 </div>
        <div id = "groupnamebutt"><input type="text" maxlength="10" oninput="numberMaxLength(this);" name="title" style = "height: 34px; width: 227px;border-radius: 10px;background: #f5f5f5;border:0px;" value="{{open.title}}"></div>
    </div>
    <div class = "introbox" style = "display:flex; flex-direction: row;justify-content: space-around;align-items: center;margin-top:3vh;">
        <div class = "category_icon" style="white-space: nowrap;vertical-align:middle;cursor:pointer;padding-left : 15px; padding-right:15px;background: rgba(247, 196, 113, 0.37);border-radius:10px;height:60px;width:38px;">
            <img src = "{%static '여행.png' %}">
            <br>
            <div id="category_txt" style= "font-size: 13.5px;font-family:Nanum Gothic;text-align:center;margin-right:1px;">
                여행
            </div>
        </div>
        <div id = "introbutt"><input type="text" maxlength="20" oninput="numberMaxLength(this);" name="intro" style = "height: 34px; width: 227px;border-radius: 10px;background: #f5f5f5;border:0px;margin-right:3.3px;" value="{{open.intro}}""></div>
    </div>
    <div class = "contentbox" wrap = "hard" style = "display:flex;justify-content:center;flex-direction:row;margin-top:3vh;font-size: 17px;font-family: Nanum Gothic;">
        <textarea placeholder="모임을 설명해주세요." name="content" cols='10' rows='5' style = "height: 17.5vh;width:90%;display:flex;border-radius: 10px;background: #f5f5f5;border:0px;font-size: 15px;font-family: Nanum Gothic;">{{open.content}}</textarea><br>
    </div>
    <div class = "imagefilebox" style = "margin-top:3vh;height: 15vh; width:99%; border: 1px solid; border-color: #d3d3d3 white;align-items: center;
    display: flex;flex-direction: row; justify-content: space-around;">
        <div class = "image_file">
            <label className="input-file-button" for="input-file" >
                {% if open.image %}
                <img src="{{open.image.url}}" id="previewImage" style="height: 80px; width: 100px;margin-top:8px; margin-bottom: 5px;border-radius: 10px;">
                {% else %}
                <img src="{%static '사진파일.png'%}" id="previewImage" style="height: 80px; width: 100px;margin-top:8px; margin-bottom: 5px;border-radius: 10px;">
                {% endif %}
            </label>
            <input type="file" class="file" id="input-file" name="image" style="display:none" onchange="imageView(this);">
            <script type="text/javascript">
            function readImage(input) {
                if (input.files && input.files[0]) {
                    const reader = new FileReader();
                    
                    reader.onload = (e) => {
                        const previewImage = document.getElementById('previewImage');
                        previewImage.src = e.target.result;
                    }
                    reader.readAsDataURL(input.files[0]);
                }
            }
            document.getElementById('input-file').addEventListener('change', (e) => {
                readImage(e.target);
            })
            </script>
        </div>
    </div>
    <div class = "member" style = "width:45%;display:flex; flex-direction: row;justify-content: space-around;margin-top: 1vh;">
        <div class = "memberbox" style="display:flex;flex-direction: column;align-items: center;text-align: center;margin-right:20px;margin-left:60px;margin-top:5px;">
            <div id = "memberimg"><img src= "{%static '인원.png'%}"></div>
            <div id = "membertxt" style = "font-family: Nanum Gothic; font-size:13px;">인원</div>
        </div>
        <div class = "selectmember">
            <select name="number" style = "margin-top:10px;height: 34px; width: 125px;border-radius: 10px;background: #f5f5f5;border:0px; text-align: center;margin-left:20">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
                <option value="18">18</option>
                <option value="19">19</option>
                <option value="20">20</option>
                <option value="21">21</option>
                <option value="22">22</option>
                <option value="23">23</option>
                <option value="24">24</option>
                <option value="25">25</option>
                <option value="26">26</option>
                <option value="27">27</option>
                <option value="28">28</option>
                <option value="29">29</option>
                <option value="30">30</option>
                <option value="31">31</option>
                <option value="32">32</option>
                <option value="33">33</option>
                <option value="34">34</option>
                <option value="35">35</option>
                <option value="36">36</option>
                <option value="37">37</option>
                <option value="38">38</option>
                <option value="39">39</option>
                <option value="40">40</option>
                <option value="41">41</option>
                <option value="42">42</option>
                <option value="43">43</option>
                <option value="44">44</option>
                <option value="45">45</option>
                <option value="46">46</option>
                <option value="47">47</option>
                <option value="48">48</option>
                <option value="49">49</option>
                <option value="50">50</option>
            </select><br><br>
        </div>
    </div>
    <div class = "button" style="display:flex;justify-content: center;margin-top:1vh;">
        <button type="submit" style="width: 274px;height: 41px;border-radius: 10px;background: #f6b955;border:0px;font-size: 15.5px;font-family: Nanum Gothic;color:white;font-weight: bold;">수정하기</button>
    </div>    
</form>
<div class = "button" style="display:flex;justify-content: center;margin-top:3vh;margin-bottom: 70px;">
    <a href="{% url 'delete_alert_6' open.id %}">
    <button type="submit" style="width: 274px;height: 41px;border-radius: 10px;background: #e68686;border:0px;font-size: 15.5px;font-family: Nanum Gothic;color:white;font-weight: bold;">모임 삭제</button>
    </a>
</div>

{% endblock %}